<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alle Teilnehmer</title>

  <!-- Dein Custom CSS -->
  <link rel="stylesheet" href="css/custom.css" />
  <link href="https://cdn.jsdelivr.net/npm/bs-stepper/dist/css/bs-stepper.min.css" rel="stylesheet" />


  <!-- Bootstrap & Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light p-4 p-lg-5">


    <!-- CARD 1: Heading + Filter -->
    <div class="card border-0 shadow mb-3">
      <div class="card-body p-4">

        <!-- Überschrift + Button -->
        <div class="d-flex flex-wrap justify-content-between align-items-start gap-3 mb-3">
          <div>
            <h2 class="fw-normal mb-2">Alle Teilnehmer</h2>
            <div class="text-secondary" style="font-size: 0.95rem; max-width: 900px;">
              Übersicht aller aktuell erfassten Teilnehmer. Klicken Sie auf eine Zeile, um das Profil aufzurufen.<br>
              Oder nutzen Sie den Filter, um den Datensatz zu finden.
            </div>
          </div>

          <div class="d-flex align-items-center gap-2">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#teilnehmerModal"
            >
              <i class="bi bi-person-plus me-1"></i> Neuer Teilnehmer
            </button>
          </div>
        </div>

        <hr class="my-3">

        <!-- Filterzeile -->
        <div class="row g-2 align-items-end">
          <div class="col-md-4">
            <label class="form-label text-secondary small mb-1">Suche</label>
            <div class="input-group">
              <span class="input-group-text bg-white">
                <i class="bi bi-search"></i>
              </span>
              <input type="text" class="form-control" placeholder="Name, Kundennummer, …" />
              <button class="btn btn-outline-primary">Suchen</button>
            </div>
          </div>

          <div class="col-md-3">
            <label class="form-label text-secondary small mb-1">Maßnahme</label>
            <select class="form-select">
              <option selected>Alle Maßnahmen</option>
              <option>Integra 2025</option>
              <option>Integra 2024</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label text-secondary small mb-1">Betreuer</label>
            <select class="form-select">
              <option selected>Alle Betreuer</option>
              <option>Daniel Chu</option>
              <option>Corinna Adams</option>
            </select>
          </div>

          <div class="col-md-2">

          </div>
        </div>

      </div>
    </div>

    <!-- CARD 2: Toolbar + Tabelle -->
    <div class="card border-0 shadow">
      <div class="card-body p-0">

        <!-- Toolbar -->
        <div class="p-3 p-lg-4 border-bottom d-flex flex-wrap justify-content-between align-items-center gap-2">
          <div class="d-flex flex-wrap gap-2">
            <div class="dropdown">
              <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                <i class="bi bi-layout-three-columns me-1"></i> Spalten anzeigen
              </button>
              <div class="dropdown-menu p-3" style="min-width: 260px;">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colKundennr">
                  <label class="form-check-label" for="colKundennr">Kundennummer</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colGeb">
                  <label class="form-check-label" for="colGeb">Geburtsdatum</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colStatus">
                  <label class="form-check-label" for="colStatus">Status</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colZuweisung">
                  <label class="form-check-label" for="colZuweisung">Zuweisung</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colMassnahme">
                  <label class="form-check-label" for="colMassnahme">Maßnahme</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" checked id="colBetreuer">
                  <label class="form-check-label" for="colBetreuer">Betreuer</label>
                </div>
              </div>
            </div>

            <div class="dropdown">
              <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                <i class="bi bi-download me-1"></i> Exportieren
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#"><i class="bi bi-filetype-csv me-2"></i>CSV</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-excel me-2"></i>Excel</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-pdf me-2"></i>PDF</a></li>
              </ul>
            </div>
          </div>

          <div class="d-flex align-items-center gap-2">
            <span class="badge rounded-pill bg-warning text-dark fs-6">2</span>
            <span class="text-secondary">Anzahl der Teilnehmer</span>
          </div>
        </div>

        <!-- Tabelle -->
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>Teilnehmer</th>
                <th>Kundennummer</th>
                <th>Geburtsdatum</th>
                <th>Status</th>
                <th>Zuweisung</th>
                <th>Maßnahme</th>
                <th>Betreuer</th>
                <th class="text-end">Aktionen</th>
              </tr>
            </thead>

            <tbody>

              <tr
                class="row-click"
                data-row-click="TN-Profil_grunddaten.html"
                data-bs-toggle="tooltip"
                title="Profil aufrufen"
                style="cursor:pointer;"
              >
                <td class="fw-semibold">
                  <span class="badge text-bg-secondary me-2">MM</span> Max Mustermann
                </td>
                <td>1234434</td>
                <td>01.01.2000</td>
                <td><span class="badge bg-success">Aktiv</span></td>
                <td>01.01.25 - 01.01.26</td>
                <td>Integra 2025</td>
                <td>Daniel Chu</td>
                <td class="text-end">
                  <div class="btn-group btn-group-sm" role="group" aria-label="Aktionen">
                    <button class="btn btn-outline-secondary" title="Profil" onclick="event.stopPropagation()">
                      <i class="bi bi-person-vcard"></i>
                    </button>
                    <button class="btn btn-outline-secondary" title="Notiz" onclick="event.stopPropagation()">
                      <i class="bi bi-journal-text"></i>
                    </button>
                    <button class="btn btn-outline-secondary" title="Mehr" onclick="event.stopPropagation()">
                      <i class="bi bi-three-dots"></i>
                    </button>
                  </div>
                </td>
              </tr>

              <tr
                class="row-click"
                data-row-click="TN-Profil_grunddaten.html"
                data-bs-toggle="tooltip"
                title="Profil aufrufen"
                style="cursor:pointer;"
              >
                <td class="fw-semibold">
                  <span class="badge text-bg-secondary me-2">PP</span> Pax Pustermann
                </td>
                <td>1234434</td>
                <td>01.01.2000</td>
                <td><span class="badge bg-success">Aktiv</span></td>
                <td>01.01.25 - 01.01.26</td>
                <td>Integra 2025</td>
                <td>Daniel Chu</td>
                <td class="text-end">
                  <div class="btn-group btn-group-sm" role="group" aria-label="Aktionen">
                    <button class="btn btn-outline-secondary" title="Profil" onclick="event.stopPropagation()">
                      <i class="bi bi-person-vcard"></i>
                    </button>
                    <button class="btn btn-outline-secondary" title="Notiz" onclick="event.stopPropagation()">
                      <i class="bi bi-journal-text"></i>
                    </button>
                    <button class="btn btn-outline-secondary" title="Mehr" onclick="event.stopPropagation()">
                      <i class="bi bi-three-dots"></i>
                    </button>
                  </div>
                </td>
              </tr>

              <!-- Weitere Zeilen ... -->

            </tbody>
          </table>
        </div>

      </div>
    </div>




  <!-- Modal: Teilnehmerprofil -->
  <div
    class="modal fade"
    id="profileModal"
    tabindex="-1"
    aria-labelledby="profileModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Teilnehmerprofil</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Schließen"
          ></button>
        </div>
        <div class="modal-body">
          <div class="card m-3">
            <div class="card-body">
              <div class="row">
                <!-- Linke Spalte: Avatar + Maßnahme -->
                <div class="col-md-3 border-end text-center">
                  <div class="avatar-initials bg-secondary text-white mx-auto mb-3">MM</div>
                  <h4>Max Mustermann</h4>
                  <p class="text-muted">Aktuelle Maßnahme:</p>
                  <h5 class="text-primary fw-bold">Integra 2025</h5>
                  <button class="btn btn-outline-primary btn-sm mt-3">Personalbogen</button>
                </div>

                <!-- Rechte Spalte: Tabs -->
                <div class="col-md-9">
                  <ul class="nav nav-tabs" id="profilTabs" role="tablist">
                    <li class="nav-item">
                      <button
                        class="nav-link active"
                        data-bs-toggle="tab"
                        data-bs-target="#tabDaten"
                      >
                        Teilnehmerdaten
                      </button>
                    </li>
                    <li class="nav-item">
                      <button
                        class="nav-link"
                        data-bs-toggle="tab"
                        data-bs-target="#tabVerlauf"
                      >
                        Maßnahmenverlauf
                      </button>
                    </li>
                  </ul>

                  <div class="tab-content mt-3">
                    <!-- TAB 1: Teilnehmerdaten -->
                    <div class="tab-pane fade show active" id="tabDaten">
                      <form class="row g-3" id="profilForm">
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              class="form-control"
                              id="nachname"
                              value="Mustermann"
                              readonly
                            />
                            <label for="nachname">Nachname</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input class="form-control" id="vorname" value="Max" readonly />
                            <label for="vorname">Vorname</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              class="form-control"
                              id="geburtsname"
                              value="Muster"
                              readonly
                            />
                            <label for="geburtsname">Geburtsname</label>
                          </div>
                        </div>

                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <select class="form-select" id="geschlecht" disabled>
                              <option selected>Männlich</option>
                              <option>Weiblich</option>
                              <option>Divers</option>
                            </select>
                            <label for="geschlecht">Geschlecht</label>
                          </div>
                        </div>

                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              class="form-control"
                              id="strasse"
                              value="Musterstraße"
                              readonly
                            />
                            <label for="strasse">Straße</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input class="form-control" id="hausnummer" value="12" readonly />
                            <label for="hausnummer">Hausnummer</label>
                          </div>
                        </div>

                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input class="form-control" id="plz" value="12345" readonly />
                            <label for="plz">PLZ</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input class="form-control" id="ort" value="Musterstadt" readonly />
                            <label for="ort">Ort</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              class="form-control"
                              id="land"
                              value="Deutschland"
                              readonly
                            />
                            <label for="land">Land</label>
                          </div>
                        </div>

                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              type="date"
                              class="form-control"
                              id="geburtsdatum"
                              value="1990-01-01"
                              readonly
                            />
                            <label for="geburtsdatum">Geburtsdatum</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              type="tel"
                              class="form-control"
                              id="telefon"
                              value="0123 456789"
                              readonly
                            />
                            <label for="telefon">Telefon</label>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3">
                          <div class="form-floating">
                            <input
                              type="email"
                              class="form-control"
                              id="mail"
                              value="max@example.com"
                              readonly
                            />
                            <label for="mail">E-Mail</label>
                          </div>
                        </div>
                      </form>

                      <div class="d-flex justify-content-start gap-3 mt-4">
                        <button
                          type="button"
                          class="btn btn-primary"
                          onclick="enableProfilEdit()"
                        >
                          <i class="bi bi-pencil me-2"></i>Bearbeiten
                        </button>

                        <button type="button" class="btn btn-success">
                          <i class="bi bi-save me-2"></i>Speichern
                        </button>
                      </div>
                    </div>

                    <!-- TAB 2: Maßnahmenverlauf (verkürzt beibehalten) -->
                    <div class="tab-pane fade" id="tabVerlauf">
                      <div class="timeline">
                        <ul
                          class="list-unstyled position-relative ms-4 border-start border-2 border-primary"
                        >
<li class="position-relative mb-4">
  <div class="timeline-dot bg-primary"></div>

  <div 
    class="ms-4 ps-2 py-3 px-3 bg-light rounded shadow-sm massnahme-klick"
    data-page="TN-Profil_massnahme.html"
  >
    <div class="position-absolute top-0 end-0 m-2">
      <button 
        class="btn btn-sm btn-outline-secondary btn-lg"
        onclick="event.stopPropagation()"
      >
        <i class="bi bi-journal-text me-1"></i> Maßnahmenverlauf aufrufen
      </button>
    </div>

    <small class="text-muted">01.01.2024 – 31.12.2024</small><br />
    <strong class="text-primary">Aktuelle Maßnahme – Integra 2025</strong>
  </div>
</li>

                          <li class="position-relative mb-4">
                            <div class="timeline-dot bg-primary"></div>
                            <div class="ms-4 ps-2 py-3 px-3 bg-light rounded shadow-sm">
                              <div class="position-absolute top-0 end-0 m-2">
                                <button class="btn btn-sm btn-outline-secondary btn-lg">
                                  <i class="bi bi-journal-text me-1"></i> Massnahmenverlauf
                                  aufrufen
                                </button>
                              </div>
                              <small class="text-muted">01.03.2023 – 30.06.2023</small><br />
                              <strong>2023 – Kurs Aktivierung</strong>
                            </div>
                          </li>
                        </ul>
                      </div>

                      <div class="d-flex justify-content-between align-items-center mt-4">
                        <button
                          class="btn btn-outline-primary"
                          onclick="document.getElementById('wechselForm').classList.remove('d-none')"
                        >
                          <i class="bi bi-arrow-left-right me-2"></i>Maßnahmenwechsel
                        </button>
                      </div>

                      <form id="wechselForm" class="row g-3 mt-3 d-none">
                        <div class="col-md-4">
                          <input class="form-control" type="date" placeholder="von" />
                        </div>
                        <div class="col-md-4">
                          <input class="form-control" type="date" placeholder="bis" />
                        </div>
                        <div class="col-md-4">
                          <select class="form-select">
                            <option selected>Neue Maßnahme wählen</option>
                            <option>Integra 2025</option>
                            <option>Sprungbrett</option>
                          </select>
                        </div>
                        <div class="col-12 text-end">
                          <button class="btn btn-success" type="submit">Speichern</button>
                        </div>
                      </form>
                    </div>
                    <!-- Ende tabVerlauf -->
                  </div>
                </div>
                <!-- Ende rechte Spalte -->
              </div>
            </div>
          </div>
        </div>
        <!-- modal-body -->
      </div>
    </div>
  </div>

  <!-- Optional: Modal "Neuer Teilnehmer" (Platzhalter, kannst du später füllen oder löschen) -->
  <div
    class="modal fade"
    id="teilnehmerModal"
    tabindex="-1"
    aria-labelledby="teilnehmerModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="teilnehmerModalLabel">Neuer Teilnehmer</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Schließen"
          ></button>
        </div>
<div class="modal-body">
  <div class="container mt-3">
    <form id="teilnehmerForm">
      <div class="card">
        <div id="stepper" class="bs-stepper">
          <div class="bs-stepper-header m-3" role="tablist">
            <div class="step" data-target="#logins-part">
              <button
                type="button"
                class="step-trigger"
                role="tab"
                aria-controls="logins-part"
                id="logins-part-trigger"
              >
                <span class="bs-stepper-circle">1</span>
                <span>Grundinformationen</span>
              </button>
            </div>
            <div class="line"></div>
            <div class="step" data-target="#information-part">
              <button
                type="button"
                class="step-trigger"
                role="tab"
                aria-controls="information-part"
                id="information-part-trigger"
              >
                <span class="bs-stepper-circle">2</span>
                <span>Maßnahme</span>
              </button>
            </div>
            <div class="line"></div>
            <div class="step" data-target="#confirmation-part">
              <button
                type="button"
                class="step-trigger"
                role="tab"
                aria-controls="confirmation-part"
                id="confirmation-part-trigger"
              >
                <span class="bs-stepper-circle">3</span>
                <span>Sonstige Angaben</span>
              </button>
            </div>
          </div>

          <div class="bs-stepper-content">
            <!-- STEP 1 -->
            <div
              id="logins-part"
              class="content d-none"
              role="tabpanel"
              aria-labelledby="logins-part-trigger"
            >
              <div class="row">
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="nachname"
                      placeholder="Nachname"
                      required
                      minlength="2"
                    />
                    <label for="nachname">Nachname</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="vorname"
                      placeholder="Vorname"
                    />
                    <label for="vorname">Vorname</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="geburtsname"
                      placeholder="Geburtsname"
                    />
                    <label for="geburtsname">Geburtsname</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="geschlecht">
                      <option selected>Wählen...</option>
                      <option value="m">Männlich</option>
                      <option value="w">Weiblich</option>
                      <option value="d">Divers</option>
                    </select>
                    <label for="geschlecht">Geschlecht</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="strasse"
                      placeholder="Straße"
                    />
                    <label for="strasse">Straße</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="hausnummer"
                      placeholder="Hausnummer"
                    />
                    <label for="hausnummer">Hausnummer</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="plz"
                      placeholder="PLZ"
                    />
                    <label for="plz">PLZ</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="ort"
                      placeholder="Ort"
                    />
                    <label for="ort">Ort</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="land"
                      placeholder="Land"
                    />
                    <label for="land">Land</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="date"
                      class="form-control"
                      id="geburtsdatum"
                    />
                    <label for="geburtsdatum">Geburtsdatum</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="tel"
                      class="form-control"
                      id="telefon"
                      placeholder="Telefon"
                    />
                    <label for="telefon">Telefon</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="tel"
                      class="form-control"
                      id="mobil"
                      placeholder="Mobil"
                    />
                    <label for="mobil">Mobil</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="email"
                      class="form-control"
                      id="mail"
                      placeholder="Mail"
                    />
                    <label for="mail">Mail</label>
                  </div>
                </div>
              </div>

              <div class="mt-3">
                <button
                  type="button"
                  class="btn btn-primary"
                  onclick="stepper.next(); showStep('information-part')"
                >
                  Weiter
                </button>
              </div>
            </div>

            <!-- STEP 2 -->
            <div
              id="information-part"
              class="content d-none"
              role="tabpanel"
              aria-labelledby="information-part-trigger"
            >
              <div class="row">
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="massnahme">
                      <option selected disabled value="">Maßnahme</option>
                      <option>Option 1</option>
                    </select>
                    <label for="massnahme">Maßnahme</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="betreuer">
                      <option selected disabled value="">Betreuer</option>
                      <option>Betreuer 1</option>
                    </select>
                    <label for="betreuer">Betreuer</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="kennung"
                      placeholder="Kennung"
                    />
                    <label for="kennung">Kennung</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="date"
                      class="form-control"
                      id="zuweisung_von"
                    />
                    <label for="zuweisung_von">Zuweisung von:</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="date"
                      class="form-control"
                      id="zuweisung_bis"
                    />
                    <label for="zuweisung_bis">Zuweisung bis:</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input
                      type="date"
                      class="form-control"
                      id="eintritt"
                    />
                    <label for="eintritt">Eintrittsdatum</label>
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="jc-team">
                      <option selected disabled value="">Maßnahme</option>
                      <option>Team A</option>
                    </select>
                    <label for="jc-team">JC-Team</label>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="jc-mitarbeiter">
                      <option selected>wählen...</option>
                      <option value="m">Alessandro</option>
                      <option value="w">Uwe</option>
                    </select>
                    <label for="jc-mitarbeiter">JC-Mitarbeiter</label>
                  </div>
                </div>
              </div>

              <div class="mt-3">
                <button
                  type="button"
                  class="btn btn-secondary me-2"
                  onclick="stepper.previous(); showStep('logins-part')"
                >
                  Zurück
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  onclick="stepper.next(); showStep('confirmation-part')"
                >
                  Weiter
                </button>
              </div>
            </div>

            <!-- STEP 3 -->
            <div
              id="confirmation-part"
              class="content d-none"
              role="tabpanel"
              aria-labelledby="confirmation-part-trigger"
            >
              <p>Sonstige Angaben und Bestätigung.</p>
              <div class="mt-3">
                <button
                  type="button"
                  class="btn btn-secondary me-2"
                  onclick="stepper.previous(); showStep('information-part')"
                >
                  Zurück
                </button>
                <button type="submit" class="btn btn-success">
                  Teilnehmer erstellen
                </button>
              </div>
            </div>
          </div>
          <!-- bs-stepper-content -->
        </div>
        <!-- bs-stepper -->
      </div>
      <!-- card -->
    </form>
  </div>
</div>

      </div>
    </div>
  </div>

<!-- JS: Bootstrap + Stepper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bs-stepper/dist/js/bs-stepper.min.js"></script>

<script>
  let stepper;

  document.addEventListener("DOMContentLoaded", function () {
    console.log("teilnehmer.html DOMContentLoaded");

    // ===== Profil bearbeiten (Button im Profil-Modal) =====
    function enableProfilEdit() {
      const form = document.getElementById("profilForm");
      if (!form) return;

      form.querySelectorAll("input").forEach((input) => input.removeAttribute("readonly"));
      form.querySelectorAll("select").forEach((select) => select.removeAttribute("disabled"));
    }
    // global machen, damit das onclick im HTML funktioniert
    window.enableProfilEdit = enableProfilEdit;

    // ===== Stepper im „Neuer Teilnehmer“-Fullscreen-Modal =====
    const stepperElement = document.querySelector("#stepper");
    if (stepperElement) {
      stepper = new window.Stepper(stepperElement);
      showStep("logins-part");

      const formEl = document.getElementById("teilnehmerForm");
      if (formEl) {
        formEl.addEventListener("submit", function (e) {
          e.preventDefault();
          alert("Teilnehmer erfolgreich erstellt!");

          const modalEl = document.getElementById("teilnehmerModal");
          if (modalEl) {
            let modal = bootstrap.Modal.getInstance(modalEl);
            if (!modal) {
              modal = new bootstrap.Modal(modalEl);
            }
            modal.hide();
          }

          this.reset();
          stepper.to(1);
          showStep("logins-part");
        });
      }
    }

    function showStep(id) {
      document
        .querySelectorAll(".bs-stepper-content .content")
        .forEach((step) => step.classList.add("d-none"));
      const active = document.getElementById(id);
      if (active) active.classList.remove("d-none");
    }
    window.showStep = showStep;

    // ===== Zeilen-Klick: Profilseite im iframe laden =====
    document.querySelectorAll("[data-row-click]").forEach(row => {
      row.style.cursor = "pointer";

      row.addEventListener("click", function () {
        const targetPage = this.getAttribute("data-row-click");
        console.log("Zeile geklickt, Zielseite:", targetPage);

        let frame = null;
        try {
          // Wenn teilnehmer.html im iframe von prototyp.html läuft:
          frame = parent.document.getElementById("mainFrame");
        } catch (e) {
          console.error("Zugriff auf parent.document nicht möglich:", e);
        }

        if (frame && targetPage) {
          console.log("Seite im iframe laden:", targetPage);
          frame.src = targetPage;
        } else if (targetPage) {
          console.warn("Kein iframe gefunden, lade Seite direkt:", targetPage);
          // Fallback: wenn teilnehmer.html direkt geöffnet ist
          window.location.href = targetPage;
        } else {
          console.warn("Keine Zielseite in data-row-click gesetzt.");
        }
      });
    });

    // ===== Bootstrap-Tooltips für Zeilen =====
    const tooltipTriggerList = [].slice.call(
      document.querySelectorAll('[data-bs-toggle="tooltip"]')
    );
    tooltipTriggerList.map(el => new bootstrap.Tooltip(el));
  });

  function openMassnahmeProfil(page) {
    // im Prototyp-Layout das iframe finden
    const frame = parent.document.getElementById("mainFrame");

    if (frame && page) {
      frame.src = page;
    }
  }
  
  

  


</script>




</body>
</html>
